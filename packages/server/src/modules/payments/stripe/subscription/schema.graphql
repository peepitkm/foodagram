type StripeSubscription {
  active: Boolean!
  errors: [FieldError!]
}

type StripeSubscriptionCard {
  expiryMonth: Int
  expiryYear: Int
  last4: String
  brand: String
}

type StripeSubscriberProtectedNumber {
  number: Int
}

input StripeSubscribtionInput {
  token: String!
  expiryMonth: Int!
  expiryYear: Int!
  last4: String!
  brand: String!
}

extend type Query {
  # Get current user's subscription
  stripeSubscription: StripeSubscription
  # Get magic number only available to subscribers
  stripeSubscriptionProtectedNumber: StripeSubscriberProtectedNumber
  # Get payment information for current user's subscription
  stripeSubscriptionCard: StripeSubscriptionCard
}

extend type Mutation {
  # Subscribe a user
  addStripeSubscription(input: StripeSubscribtionInput!): StripeSubscription!
  # Cancel a user's subscription
  cancelStripeSubscription: StripeSubscription!
  # Update a user's card information
  updateStripeSubscriptionCard(input: StripeSubscribtionInput!): Boolean!
}
